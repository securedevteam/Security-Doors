@model IEnumerable<DoorPassingViewModel>

<h1>Список дверных проходов</h1>

<br />

<div>
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Время прохода</th>
                <th>Название двери</th>
                <th>Уникальный номер карточки</th>
                <th>Статус</th>
                <th>Проход</th>
                <th>Комментарий</th>

                @if (User.IsInRole("admin"))
                {
                    <th>Доступные действия</th>
                }
            </tr>
        </thead>

        @if (User.IsInRole("user") || User.IsInRole("visitor"))
        {
            <tbody>
                @foreach (var item in Model)
                {
                    @if (User.Identity.Name == item.Comment)
                    {
                        <tr>
                            <td>@item.Id</td>
                            <td>@item.PassingTime</td>
                            <td>@item.Door</td>
                            <td>@item.Card</td>
                            <td>@item.Status</td>
                            <td>@item.Location</td>
                            <td>@item.Comment</td>
                        </tr>
                    }
                }
            </tbody> 
        }

        @if (User.IsInRole("admin") || User.IsInRole("moderator"))
        {
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.PassingTime</td>
                        <td>@item.Door</td>
                        <td>@item.Card</td>
                        <td>@item.Status</td>
                        <td>@item.Location</td>
                        <td>@item.Comment</td>

                        @if (User.IsInRole("admin"))
                        {
                            <td><a asp-action="Edit" asp-controller="DoorPassing" asp-route-id="@item.Id">Изменить</a></td>
                        }
                    </tr>
                }
            </tbody>
        }
    </table>
</div>
